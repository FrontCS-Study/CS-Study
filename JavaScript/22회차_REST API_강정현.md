# [JavaScript] REST API

## REST API

**API(Application Programming Interface)** : 애플리케이션이나 디바이스가 서로 간에 연결하여 통신할 수 있는 방법을 정의하는 규칙 세트.

**REST API**:  `REST(REpresentational State Transfer)` 아키텍처 스타일의 디자인 원칙을 준수하는 API.

<br/>

### REST 디자인 원칙

1. 균일한(Uniform) 인터페이스 
   - 서버가 **표준 형식으로 정보를 전송**하며, 요청이 어디에서 오는지와 무관하게 동일한 리소스에 대한 모든 API 요청은 동일하게 보여야 한다.

2. 클라이언트-서버 디커플링
     - 클라이언트와 서버는 서로 간에 완전히 독립적이어야 한다.
     - 클라이언트가 알아야 하는 유일한 정보는 요청된 리소스의 URI이며, 다른 방법으로 서버와 상호작용할 수 없다.
     - 서버는 HTTP를 통해 요청된 데이터에 전달하는 것 말고는, 클라이언트를 수정하지 않아야 한다.

3. Stateless
   - REST API는 stateless이며, 각 요청에서 처리에 필요한 모든 정보를 포함하여야 한다.
   - REST API는 서버측 세션을 필요로 하지 않으며, 서버는 클라이언트 요청과 관련된 데이터를 저장할 수 없고, 들어오는 요청만을 단순히 처리한다.
   - 서비스의 자유도가 높아지고, 서버에서 불필요한 정보를 관리하지 않음으로써 구현이 단순해진다. 

4. 캐싱 가능성
   - HTTP라는 기존 웹표준을 그대로 적용하기 때문에, 웹에서 사용하는 기존 인프라를 그대로 활용 가능하다.
   - HTTP가 가진 캐싱 기능이 적용 가능하다. **Last-Modified 태그**나 **E-Tag** 을 이용하여 캐싱 구현이 가능하다.

5. 계층 구조 아키텍처
   - REST 서버는 다중 계층으로 구성될 수 있으며 보안, 로드 밸런싱, 암호화 계층을 추가해 구조상의 유연성을 둘 수 있고, PROXY, 게이트웨이 같은 네트워크 기반의 중간매체를 사용할 수 있게 한다.

6. 코드 온디맨드(옵션)
   - 서버로부터 스크립트를 받아서 클라이언트에서 실행한다.

<br/>

### REST API 작동 방식

1. 클라이언트가 서버에 요청을 전송한다. - API 문서에 따라 서버가 이해하는 방식으로 요청 형식을 지정한다.
2. 서버가 클라이언트를 인증하고, 해당 요청을 수행할 수 있는 권한이 클라이언트에 있는지 확인한다.
3. 서버가 요청을 수신하고 내부적으로 처리한다.
4. 서버가 클라이언트에 응답을 반환한다. 응답에는 요청 성공 여부 / 요청한 모든 정보가 포함된다. 

<br/>

### REST 구성

- 고유 리소스 식별자
  - 서버는 고유한 리소스 식별자로 각 리소스를 식별한다. 
  - REST의 경우, 일반적으로 **URL(Uniform Resource Locator)**을 사용하며, 리소스에 대한 경로를 지정한다. (ex. `/groups/:group_id`)
- HTTP 메소드
  - GET : 서버에 지정된 URL에 있는 리소스에 엑세스한다.
  - POST : 서버에 데이터를 전송한다.
  - PUT : 서버의 기존 리소스를 업데이트 한다.
  - DELETE : 리소스를 제거한다.
- 표현 (Representation of Resource)
  - 클라이언트가 자원의 상태(정보)에 대한 조작을 요청하면, 서버는 이에 적절한 응답(Representation)을 보낸다.
  - REST 에서 하나의 자원은 JSON, XML, TEXT, RSS 등 여러 형태로 나타낼 수 있다.
- HTTP 헤더
  - 데이터 : HTTP 메소드가 성공적으로 작동하기 위한 데이터가 포함될 수 있다.
  - 파라미터 : 수행해야 할 작업에 대한 자세한 정보를 서버에 제공하는 파라미터가 포함될 수 있다.
    - URL 세부정보를 지정하는 경로 파라미터.
    - 리소스에 대한 추가 정보를 요청하는 쿼리 파라미터.
    - 클라이언트를 빠르게 인증하는 쿠키 파라미터.
<br/>

## HTTP 응답 상태 코드

- 200번대 

| 상태 코드 | 내용                                                         |
| :-------: | ------------------------------------------------------------ |
|    200    | 클라이언트의 요청을 정상적으로 수행함                        |
|    201    | 클라이언트가 어떠한 리소스 생성을 요청, 해당 리소스가 성공적으로 생성됨 (POST를 통한 리소스 생성 작업 시) |

- 400번대

| 상태 코드 | 내용                                                         |
| :-------: | ------------------------------------------------------------ |
|    400    | 클라이언트의 요청이 부적절할 경우 사용하는 응답 코드         |
|    401    | 클라이언트가 인증되지 않은 상태에서 보호된 리소스를 요청했을 때 사용하는 응답 코드<br />(로그인 하지 않은 유저가, 로그인한 경우에 요청 가능한 리소스를 요청했을 때) |
|    403    | 유저 인증상태와 관계 없이 응답하고 싶지 않은 리소스를 클라이언트가 요청했을 때 사용하는 응답 코드 |
|    405    | 클라이언트가 요청한 리소스에서는 사용 불가능한 Method를 이용했을 경우 사용하는 응답 코드 |

- 그 외

| 상태 코드 | 내용                                                         |
| :-------: | ------------------------------------------------------------ |
|    301    | 클라이언트가 요청한 리소스에 대한 URI가 변경되었을 때 사용하는 응답 코드<br />(응답 시 Location header에 변경된 URI를 적어줘야 함. |
|    500    | 서버에 문제가 있을 경우 사용하는 응답 코드                   |

---

**Reference**

[REST API란?](https://www.ibm.com/kr-ko/topics/rest-apis)

[REST API 제대로 알고 사용하기](https://meetup.nhncloud.com/posts/92)

[RESTful API란 무엇인가요?](https://aws.amazon.com/ko/what-is/restful-api/)

[[Network] REST란? REST API란? RESTful이란?](https://gmlwjd9405.github.io/2018/09/21/rest-and-restful.html)
