# SPA, MPA

![MPA VS SPA](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FDHM8P%2Fbtr5YVMdoGq%2FU2d72AN6ee8303ir5b1k91%2Fimg.png)

### 💡 SPA

오늘날 웹 애플리케이션을 개발한다고 하면 대부분, React, Angular, Vue와 같은 자바스크립트 기반 프레임워크를 사용해 SPA를 개발한다.

SPA는 Single Page Applicatoin의 약자로 단일 페이지로 구성된 웹 어플리케이션이다. 리액트는 SPA 방식을 채택하고 있으며, SPA로 개발된 웹 사이트에서는 카테고리에 있는 각 메뉴를 선택하면 보통 헤더는 고정되어 있는 상태로 메인화면 혹은 클릭한 부분만 바뀐다.

실제로 리액트 프로젝트에서는 초반에 표시되는 index.html 파일 외에는 html 문서가 없고, 나머지는 모두 자바스크립트를 이용해 index.html 파일의 내용을 바꾸어 재 렌더링 해주는 방식으로 페이지를 구성한다.

👍 **SPA 장점**

1. UX: 자연스러운 사용자 경험

   전체 페이지를 업데이트할 필요가 없기 때문에 빠르고 깜빡거리는 현상이 없다.

2. 성능: 필요한 리소스만 부분적으로 로딩한다.

   Cache: SPA의 Application은 서버에게 정적 리소스를 한 번만 요청한다. 그리고 받은 데이터는 전부 저장해놓는다.

3. 성능: 서버의 템플릿 연산을 클라이언트로 분산 가능하다.

4. 생산성: 컴포넌트별 개발이 용이하다.

5. 생산성: 모바일 앱 개발을 염두에 둔다면 동일한 API를 사용하도록 설계가 가능하다.

👎 **SPA 단점**

1. JavaScript 파일을 번들링해서 한 번에 받기 때문에 초기 구동 속도가 느리다.

   단, Webpack의 code splitting으로 해결이 가능하긴 하다.

2. 검색엔진 최적화(SEO)가 어렵다.

   이것도 SSR로 해결가능하다.

3. 보안이슈

   SSR에서는 사용자에 대한 정보를 서버측에서 세션으로 관리하지만 CSR방식에서는 클라이언트측의 쿠키말고는 사용자에 대한 정보를 저장할 공간이 마땅치 않다. 

### 💡 MPA

반면 MPA란, Multi Page Application의 약자로, 탭을 이동할 때마다 서버로부터 새로운 HTML을 새로 받아와서 페이지 전체를 렌더링하는 전통적인 웹페이지 구성 방식이다.

MPA는 SSR방식으로 렌더링하며, 새로운 페이지를 요청할 때마다 서버에서 렌더링된 정적 리소스(HTML, CSS, JavaScript)가 다운로드 된다. 

👍 **MPA 장점**

1. SEO 관점에서 유리하다. 

   MPA는 완성된 형태의 HTML 파일을 서버로부터 전달받는다. 따라서 검색엔진이 페이지를 크롤링하기에 적합하다.

2. 첫 로딩이 매우 짧다.

   서버에서 이미 렌더링을 해서 가져오기 때문에 첫 로딩시간이 굉장히 짧다. 그러나 클라이언트가 JS 파일을 모두 다운로드하고 적용하기 전까지는 각각의 기능은 동작하지 않는다.

👎 **MPA 단점**

1. UX 저하: 새로운 페이지를 이동하면 깜빡거린다.

   매 페이지 요청마다 리로딩이 발생한다. 새로운 페이지를 요청할 때마다 전체 페이지를 다시 렌더링하기 때문이다.

2. 성능 저하: 페이지 이동시에 불필요한 템플릿도 중복해서 로딩된다. 

3. 서버 렌더링에 따른 부하가 크다.

4. 생산성: 모바일 앱 개발 시에 추가적인 백엔드 작업이 필요해 개발이 복잡해질 수 있다.



# CSR, SSR

##### ✔ 일반적으로는

SPA에서는 CSR로 렌더링하고, MPA에서는 SSR로 렌더링한다.

SPA는 웹 애플리케이션에 필요한 정적 리소스를 한꺼번에 모두 다운로드하고, 이후 새로운 페이지요청이 왔을 때 필요한 데이터만 전달받아서 클라이언트에서 필요한 페이지를 갱신하기 때문에 CSR로 렌더링한다.

반면 MPA는 새로운 요청이 있을 때마다 서버에서 이미 렌더링된 정적 리소스를 받아오기 때문에 SSR로 렌더링한다.

다만, 이러한 특징 때문에 SPA===CSR, MPA===SSR이라고 오해하면 안된다. 이 두 개념은 페이지의 개수와 렌더링을 어디서 하는지 등에 따라 다른 개념이다. SPA방식이 모두 CSR인 것이 아니다!

##### ✔ CSR과 SSR의 차이점

CSR은 Client Side Rendering의 약자로, 클라이언트 측에서 렌더링 하는 방식이고, SSR은 Server Side Rendering의 약자로, 서버 측에서 렌더링 하는 방식이다. 말 그대로 어느 Side에서 렌더링을 준비하느냐에 따라 나뉘는 개념이다.

### 💡 CSR

![CSRprocess](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbfYO3T%2Fbtr53D5HiMO%2FdYI42mXnuktIDBPTBVWrQ0%2Fimg.png)

> 1. 유저가 웹사이트에 방문하면, 브라우저가 서버에 콘텐츠를 요청한다.
> 2. 이에 서버는 빈 뼈대만 있는 HTML을 응답으로 보내준다.
> 3. 브라우저가 연결된 JavaScript링크를 통해 서버로부터 다시 JS파일을 다운로드 한다.
> 4. **JS를 통해 동적으로 페이지를 만들어 브라우저에 띄워준다.**

🔍 **CSR의 장단점**

CSR은 **브라우저가 JS 파일을 다운로드 하고, 동적으로 DOM을 생성하는 시간을 기다려야** 하기 때문에 **초기 로딩 속도가 느리다**는 것이 단점이다. 하지만 초기 로딩 이후에 **페이지 일부를 변경할 때는 서버에서 해당 데이터만 요청**하면 되기 때문에 **이후 구동속도는 빠르다**는 특징이 있다.

또한, **서버는 빈 뼈대만 있는 HTML을 넘겨주는 역할**만 수행하면 되기 때문에 **서버 측의 부하가 적은**데, 뿐만 아니라 **클라이언트 측에서 연산, 라우팅 등을 모두 직접 처리**하기 때문에 **반응속도가 빠르고 UX도 우수**하다는 장점이 있다.

한편, 브라우저들이 가지는 웹 크롤러는 HTML을 읽어 검색 가능한 색인을 만들어 내는데, 웹 크롤러 봇 입장에서는 HTML이 텅텅 비어있는 것처럼 보여서 색인할 만한 콘텐츠가 존재하지 않기에, SEO에 불리하다는 단점이 있다. 물론 구글의 크롤러 봇은 JS를 실행할 줄 알기에 CSR 웹 크롤링도 가능하다고 하나, 아직 완벽한 단계가 아니기에 구글 측에서도 여전히 SSR을 고려하라는 말을 덧붙이고 있다.

### 💡 SSR

![SSRprocess](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FkLONB%2Fbtr5Rgqf5Hd%2F04Vrq80XgnfD9fHHSXKSd0%2Fimg.png)

> 1. 유저가 웹사이트에 방문하면, 브라우저가 서버에 콘텐츠를 요청한다.
> 2. **이에 서버는 페이지에 필요한 데이터를 즉시 얻어와 모두 삽입하고, CSS까지 모두 적용해 렌더링 준비를 마친 HTML과 JS코드를 브라우저에 응답으로 전달한다.**
> 3. 브라우저에서는 JS코드를 다운로드하고 HTML에 JS로직을 연결한다.

🔍 **SSR의 장단점**

SSR은 **모든 데이터가 이미 HTML에 담긴 채로 브라우저에 전달**되기 때문에 **SEO에 유리**하다. 크롤러 봇이 HTML을 무리없이 읽을 수 있기 때문이다. 더불어, JS코드를 다운로드 받고, 실행하기 전에 **사용자가 이미 HTML이 렌더링 된 화면**을 볼 수 있다. 이렇듯 JS 다운로드를 기다려야 했던 **CSR 보다 초기 구동 속도가 빠를 수 밖에** 없다.

하지만 해당 시점에서는 사용자가 버튼을 클릭하거나 이동하려고 할 때 아무 반응이 없을 수 있다. interaction이 가능한 페이지처럼 보이지만 **실제로는 내용과 스타일이 입혀진 껍데기**에 불과하고 실제로는 **클라이언트 측 JS가 실행되고 이벤트 핸들러가 첨부된 JS로직이 모두 연결될 때까지 사용자의 입력에 응답할 수 없기** 때문이다.

이렇듯, SSR에는 **TTV(Time to View)와 TTI(Time to Interact) 간의 시간 간격**이 존재한다는 것이 단점이다. 반면에 CSR은 JavaScript가 동적으로 DOM을 생성하기 때문에 HTML은 JavaScript 로직이 모두 완전히 연결된 상태라 사용자가 보는 시점과 이용할 수 있는 시점이 동일하다. 

|      | CSR                                                          | SSR                                                          |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 장점 | - 화면 깜빡임이 없음 - 초기 로딩 이후 구동 속도가 빠름 - TTV와 TTI 사이 간극이 없음 - 서버 부하 분산 | - 초기 구동 속도가 빠름 - SEO에 유리                         |
| 단점 | - 초기 로딩 속도가 느림 - SEO에 불리                         | - 화면 깜빡임이 있음 - TTV와 TTI 사이 간극이 있음 - 서버 부하가 있음 |

#### ✔ **SSR과 SSG**

SSR과 CSR을 공부할 때 자주 언급되는 SSG라는 것도 있다. **SSG는 Static Site Generation**의 약자로, **Static Rendering**이라고도 불리는 방식이다. **서버에서 HTML을 보내준다는 차원에서는 SSR과 유사하나, '언제'만들어 주는지에 따라 다른 것이다.**

**SSR**은 요청 시 서버에서 즉시 HTML을 만들어 응답하기에 **데이터가 달라지거나 자주 바뀌어 미리 만들어두기 어려운 페이지**에 적합하고, **SSG**는 페이지들을 서버에 모두 만들어 둔 후에 요청 시 해당 페이지를 응답하는 것이므로 **바뀔 일이 거의 없어 캐싱해두면 좋을 페이지**에 사용하면 적합하다.



### 🙄❔ 무엇을 쓰는게 좋을까?

✔️ CSR

- 유저와 상호작용이 많다

- 대부분이 고객의 개인정보로 이루어진 페이지들이라 검색엔진에 노출될 필요는 없다

✔️ SSR

- 회사 홈페이지여서 홍보나 상위노출이 필요하다

- 누구에게나 항상 같은 내용을 보여준다

- 업데이트가 빈번해 해당 페이지 데이터가 자주 바뀐다

✔️ SSG

- 회사 홈페이지여서 홍보나 상위노출이 필요하다

- 누구에게나 항상 같은 내용을 보여준다

- 업데이트를 거의 하지 않는다

✔️ Universal Rendering (초기 렌더링으로는 CSR + 이후 SSR)

- 사용자에 따라 페이지 내용이 달라진다

- 빠른 interaction과 화면 깜빡임이 없어야 한다

- SEO를 포기할 수 없어 상위노출이 되면 좋겠다



# SEO

SEO란 Search Engine Optimization의 약자로, "검색엔진 최적화"라는 의미를 담고 있다.
SEO 처리를 하게 되면 네이버, 구글과 같은 검색엔진에서 정보를 검색할 때 웹사이트 노출이 더 잘되게 된다.

#### 🔍 React에서 SEO 최적화가 어려운 이유

React의 렌더링 작업은 CSR 방식, 즉, client에서 자바스크립트를 동적으로 렌더링 작업을 한다는 의미이다. 이때 HTML, CSS 를 비롯한 모든 스크립트 파일을 다운로드 하기 때문에 초기 로딩 시간이 오래 걸린다는 단점이 있다.

서버는 클라이언트에 HTML과 JS를 보내주고 클라이언트는 그것을 받아 렌더링을 시작하게 된다. 단, 렌더링 작업 이전에 받은 HTML은 빈 컨텐츠 파일로 받게 되어 SEO 가 어렵다.











## Reference

- [[React] CSR vs SSR / SPA vs MPA / 리액트 라우터(React-Router)](https://tadaktadak-it.tistory.com/157)

- [이제는 알아야겠다! CSR과 SSR의 차이점과 장단점 (SPA, MPA, SSG, Universal Rendering 까지)](https://dev-ellachoi.tistory.com/28)
- [[React] SPA, CSR, SSR 개념 정리](https://velog.io/@eogus4658/React-SPA-CSR-SSR-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A6%AC)
- [Youtube 우아한테크: [10분 테코톡] 🎨 신세한탄의 CSR&SSR](https://www.youtube.com/watch?v=YuqB8D6eCKE)

- [[[React\] SPA에서 SEO 처리가 필요한 이유](https://torimaru.tistory.com/entry/React-SPA에서-SEO-처리가-필요한-이유)]