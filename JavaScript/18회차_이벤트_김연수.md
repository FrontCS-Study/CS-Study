[TOC]

## 이벤트

이벤트(event)는 **어떤 사건**을 의미한다.

브라우저에서 이벤트는 사용자가 버튼을 클릭했을 때, 특정 요소에 포커스가 될 때 등의 상호작용으로 인해 발생되는 사건을 의미 한다. 

이벤트는 일반적으로 함수에 함수에 연결되며, 이 함수를 **이벤트 핸들러(Event Handler)** 라고 한다.

[🔍 브라우저 이벤트 종류와 사용법](https://inpa.tistory.com/entry/JS-%F0%9F%93%9A-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%F0%9F%92%AF-%EC%B4%9D-%EC%A0%95%EB%A6%AC#%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80_%EC%9D%B4%EB%B2%A4%ED%8A%B8_%EB%9E%80?)

<br>

### 이벤트 전파(propagation)

DOM 트리상에 존재하는 모든 DOM 요소 노드에서 발생한 이벤트는 DOM 트리를 통해 전파된다. 이를 이벤트 전파라고 한다.

#### 이벤트 전파 과정

> 기본적으로 이벤트는 캡처링 → 타깃 → 버블링 단계 순으로 전파된다.

1. 브라우저 화면에서 이벤트가 발생하면 가장 먼저 이벤트 대상을 찾는다.
2. 이벤트가 발생한 곳을 찾기 위해 DOM Tree에서 가장 상위에 존재하는 window 객체부터 document, html 순으로 내려가는 **캡쳐링 단계**를 수행한다. 이 과정에서 캡처링 단계에 등록된 이벤트 핸들러나 리스너는 이벤트 타깃에 등록된 것보다 먼저 실행한다.
3. 이벤트 대상을 발견하면 **타깃 단계**를 진행한다. 이벤트가 실제 타깃 요소에 전달되는 과정으로 이벤트 타깃에 등록된 핸들러가 실행되는 시점이다.
4. 그 후 다시 DOM Tree를 타고 window 객체까지 전달되는 **버블링 단계**를 수행한다. 버블링 단계에 등록된 이벤트 리스너는 이벤트 타깃에 등록된 이벤트가 실행된 다음에 실행된다.

> 💡 **각 단계 한 줄 정리**
>
> 캡처링 단계 : 이벤트가 상위 요소에서 하위 요소 방향으로 전파  
> 타깃 단계 : 이벤트가 이벤트 타깃에 도달  
> 버블링 단계: 이벤트가 하위 요소에서 상위 요소 방향으로 전파

<br>

### 이벤트 버블링(Event Bubbling), 이벤트 캡쳐링(Event Capturing)

**이벤트 버블링**은 특정 화면 요소에서 이벤트가 발생했을 때 더 상위 요소들로 전달되어 가는 특성을 의미한다. 

**이벤트 캡처링**은 이벤트 버블링과 반대로 상위 요소에서 하위 요소로 탐색하며 이벤트를 전파하는 방식이다.

<br>

### 이벤트 전파를 제어

이벤트 전파로 인해 자식 요소에서 발생하는 이벤트가 부모 요소에도 전파되기 때문에 이벤트 전파를 제어하지 않으면 의도하지 않은 동작을 만날 수도 있다. 

이벤트를 제어하기 위해서는 `e.stopPropagation`, `stopImmediatePropagation`, `e.preventDefault` 메소드가 있다.

#### e.stopPropagation

현재 이벤트가 캡처링 / 버블링 단계에서 더 이상 전파되지 않도록 방지한다. 

같은 요소의 클릭 이벤트에 등록된 다른 리스너는 정상적으로 실행된다.

#### e.stopImmediatePropagation

`e.stopPropagation`와 똑같지만 동일한 요소에 발생한 동일한 이벤트에 대한 또다른 이벤트 핸들러의 실행도 막는다.

이벤트 실행 후 캡쳐링과 버블링을 포함해 다른 모든 이벤트의 실행을 막는 것이다.

#### e.preventDefault

기본으로 정의된 이벤트를 작동하지 못하게 취소 하는 메소드이다. 

예를 들어 체크박스는 사용자가 클릭함에 따라 체크가 되고 해제도 된다. 하지만 `preventDefault`를 주면 당연한 동작이었던 체크 기능을 막는다.

<br>

### 이벤트 위임(delegation)

이벤트 위임은 상위 노드에서 하위 노드의 이벤트를 제어 하고 싶을 때 쓰는 방식이다.

이벤트 위임이란 하위 요소 하나씩 개별적으로 이벤트를 부여하는 것이 아니라, 상위 요소에 이벤트를 등록하여 하위 요소의 이벤트들을 제어하는 방식을 말한다. 

#### 장점

- 많은 핸들러를 할당하지 않아도 되기 때문에 초기화가 단순해지고 메모리가 절약된다.
- 요소를 추가하거나 제거할 때 해당 요소에 할당된 핸들러를 추가하거나 제거할 필요가 없기 때문에 코드가 짧아진다.
- `innerHTML`이나 유사한 기능을 하는 스크립트로 요소 덩어리를 더하거나 뺄 수 있기 때문에 DOM 수정이 쉬워진다.

#### 단점 

- 이벤트 위임을 사용하려면 이벤트가 반드시 버블링 되어야 한다. 하지만 `focuse()`와 같이 몇몇 이벤트는 버블링 되지 않는다. 그리고 낮은 레벨에 할당한 핸들러엔 `event.stopPropagation()`를 쓸 수 없다.
- 컨테이너 수준에 할당된 핸들러가 응답할 필요가 있는 이벤트이든 아니든 상관없이 모든 하위 컨테이너에서 발생하는 이벤트에 응답해야 하므로 CPU 작업 부하가 늘어날 수 있다. 그런데 이런 부하는 무시할만한 수준이므로 실제로는 잘 고려하지 않는다.

<br>

---

**출처**

[[JavaScript] 자바스크립트 이벤트 전파](https://tangoo91.tistory.com/33)

[이벤트 전파 제어](https://velog.io/@leehyunho2001/%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EC%A0%84%ED%8C%8C-%EC%A0%9C%EC%96%B4)

[stopPropagation(), stopImmediatePropagation(), preventDefault() 비교](https://velog.io/@line_jeong32/%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%A9%94%EC%84%9C%EB%93%9C)

[이벤트 위임 - 모던 JavaScript 튜토리얼](https://ko.javascript.info/event-delegation)
