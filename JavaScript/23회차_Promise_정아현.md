# Promise



### ìë°”ìŠ¤í¬ë¦½íŠ¸ í”„ë¡œë¯¸ìŠ¤ ê°ì²´

ìë°”ìŠ¤í¬ë¦½íŠ¸ Promise ê°ì²´ëŠ” **ë¹„ë™ê¸° ì‘ì—…ì˜ ìµœì¢… ì™„ë£Œ ë˜ëŠ” ì‹¤íŒ¨**ë¥¼ ë‚˜íƒ€ë‚´ëŠ” Arrayë‚˜ Objectì²˜ëŸ¼ ë…ìì ì¸ ê°ì²´ì´ë‹¤. ë¹„ë™ê¸° ì‘ì—…ì´ ëë‚  ë•Œê¹Œì§€ ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ê²°ê³¼ë¥¼ ì œê³µí•˜ê² ë‹¤ëŠ” 'ì•½ì†'ì„ ë°˜í™˜í•œë‹¤ëŠ” ì˜ë¯¸ì—ì„œ Promiseë¼ ëª…ëª…í–ˆë‹¤ê³  í•œë‹¤.

PromiseëŠ” **3ê°€ì§€ ìƒíƒœ**ë¥¼ ê°€ì§„ë‹¤.

1ï¸âƒ£ Pending(ë¯¸ê²°, ëŒ€ê¸°) : ì´í–‰í•˜ì§€ë„, ê±°ë¶€í•˜ì§€ë„ ì•Šì€ ì´ˆê¸° ìƒíƒœ

2ï¸âƒ£ Fulfilled(ì´í–‰) : ì—°ì‚°ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œëœ ìƒíƒœ

3ï¸âƒ£ Rejected(ê±°ë¶€, ê±°ì ˆ) : ì—°ì‚°ì´ ì‹¤íŒ¨í•œ ìƒíƒœ

ëŒ€ê¸°ì¤‘ì¸ í”„ë¡œë¯¸ìŠ¤ëŠ” ê°’ê³¼ í•¨ê»˜ ì´í–‰í•  ìˆ˜ë„, ì–´ë–¤ ì´ìœ (ì˜¤ë¥˜)ë¡œ ì¸í•´ ê±°ë¶€ë  ìˆ˜ë„ ìˆë‹¤. ì´í–‰ì´ë‚˜ ê±°ë¶€ë  ë•Œ, í”„ë¡œë¯¸ìŠ¤ì˜ `then`ë©”ì„œë“œì— ì˜í•´ ëŒ€ê¸°ì—´(í)ì— ì¶”ê°€ëœ ì²˜ë¦¬ê¸°ë“¤ì´ í˜¸ì¶œëœë‹¤. ì´ë¯¸ ì´í–‰í–ˆê±°ë‚˜ ê±°ë¶€ëœ í”„ë¡œë¯¸ìŠ¤ì— ì²˜ë¦¬ê¸°ë¥¼ ì—°ê²°í•´ë„ í˜¸ì¶œë˜ë¯€ë¡œ, ë¹„ë™ê¸° ì—°ì‚°ê³¼ ì²˜ë¦¬ê¸° ì—°ê²° ì‚¬ì— ê²½í•© ì¡°ê±´ì€ ì—†ë‹¤.



âœ… ì˜ˆë¥¼ ë“¤ì–´, ì—¬ëŸ¬ë¶„ì„ ì•„ì´ë¼ê³  ìƒìƒí•˜ê³ , ì—¬ëŸ¬ë¶„ì˜ ì–´ë¨¸ë‹ˆê°€ ìƒˆë¡œìš´ **ìŠ¤ë§ˆíŠ¸í°**ì„ ë‹¤ìŒ ì£¼ì— ì‚¬ì£¼ê¸°ë¡œ **ì•½ì†** í•œë‹¤.

ê·¸ë ‡ë‹¤ê³  ë‹¤ìŒ ì£¼ì— ì •ë§ ìƒˆë¡œìš´ ìŠ¤ë§ˆíŠ¸í°ì„ ê°€ì§ˆ ìˆ˜ ìˆì„ê¹Œ? ì–´ë¨¸ë‹ˆëŠ” ìŠ¤ë§ˆíŠ¸í°ì„ ì‚¬ì¤„ ìˆ˜ë„ ìˆê³ , ë§Œì¼ ê¸°ë¶„ì´ ì¢‹ì§€ ì•Šë‹¤ë©´, ì•½ì†ì„ ì–´ê¸°ê³ , ìŠ¤ë§ˆíŠ¸í°ì„ ì‚¬ì£¼ëŠ” ê²ƒì„ ì ì‹œ ë³´ë¥˜í•  ìˆ˜ë„ ìˆë‹¤.

ì´ê²Œ ë°”ë¡œ **Promise(ì•½ì†)**ì´ë‹¤.

1. ëŒ€ê¸°(Pending): ì—¬ëŸ¬ë¶„ì€ ìƒˆë¡œìš´ ìŠ¤ë§ˆíŠ¸í°ì„ ê°€ì§ˆ ìˆ˜ ìˆì„ì§€ ì•Œ ìˆ˜ ì—†ë‹¤.
2. ì´í–‰(Fulfilled): ì–´ë¨¸ë‹ˆì˜ ê¸°ë¶„ì´ ê´œì°®ì•„ì„œ, ìŠ¤ë§ˆíŠ¸í°ì„ ì‚¬ì£¼ì…¨ë‹¤.
3. ê±°ì ˆ: Rejected ì–´ë¨¸ë‹ˆê°€ ê¸°ë¶„ì€ ê´œì°®ì§€ë§Œ, ìŠ¤ë§ˆíŠ¸í°ì€ ì‚¬ì£¼ì§€ ì•Šê¸°ë¡œ í–ˆë‹¤.



### í”„ë¡œë¯¸ìŠ¤ ê°ì²´ ìƒì„±

```js
// ES 5 //
var is MomHappy = false;

// Promise
var willGetNewPhone = new Promise((resolve, reject) => {
        var phone = {
            brand: 'Apple',
            color: 'silver'
        }
        else {
            var reason = new Error('mom is not happy');
            reject(reason); // reject
        }
    }
);
```

ìœ„ ì˜ˆì‹œë¥¼ ì½”ë“œë¡œ ë§Œë“  ê²ƒì´ë‹¤. ëŒ€ëµ ë´ë„ ë‚´ìš©ì´ ì´í•´ê°€ ê°„ë‹¤.

```js
// Promiseì˜ ë¬¸ë²•ì€ ëŒ€ëµ ë‹¤ìŒê³¼ ê°™ë‹¤.
new Promise(/_ executor _/ function (resolve, reject) { ... });
```

```js
const myPromise = new Promise((resolve, reject) => {
	// ë¹„ë™ê¸° ì‘ì—… ìˆ˜í–‰
    const data = fetch('ì„œë²„ë¡œë¶€í„° ìš”ì²­í•  URL');
    
    if(data)
    	resolve(data); // ë§Œì¼ ìš”ì²­ì´ ì„±ê³µí•˜ì—¬ ë°ì´í„°ê°€ ìˆë‹¤ë©´
    else
    	reject("Error"); // ë§Œì¼ ìš”ì²­ì´ ì‹¤íŒ¨í•˜ì—¬ ë°ì´í„°ê°€ ì—†ë‹¤ë©´
})
```



âœ” Promise ìƒì„±ì ì•ˆì— ë“¤ì–´ê°€ëŠ” ì½œë°± í•¨ìˆ˜ë¥¼ executorë¼ê³  ë¶€ë¥¸ë‹¤.

âœ” Promise ìƒì„±ì ì•ˆì— ë‘ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°€ì§„ ì½œë°± í•¨ìˆ˜ë¥¼ ë„£ëŠ”ë°, ì²« ë²ˆì§¸ ì¸ìˆ˜ëŠ” ì‘ì—…ì´ ì„±ê³µí–‡ì„ ë•Œ ì„±ê³µì„ì„ ì•Œë ¤ì£¼ëŠ” ê°ì²´, ë‘ ë²ˆì§¸ ì¸ìˆ˜ëŠ” ì‘ì—…ì´ ì‹¤íŒ¨í–ˆì„ ë•Œ ì‹¤íŒ¨ì„ì„ ì•Œë ¤ì£¼ëŠ” ì˜¤ë¥˜ ê°ì²´ì´ë‹¤.



### í”„ë¡œë¯¸ìŠ¤ ê°ì²´ ì²˜ë¦¬

Promise ê°ì²´ëŠ” ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œëœ ì´í›„, ë‹¤ìŒ ì‘ì—…ì„ ì—°ê²° ì‹œì¼œ ì§„í–‰í•  ìˆ˜ ìˆë‹¤. ì‘ì—… ê²°ê³¼ì— ë”°ë¼ `.then`, `.catch()` ë©”ì„œë“œ ì²´ì´ë‹ì„ í†µí•´ ì„±ê³µê³¼ ì‹¤íŒ¨ì— ëŒ€í•œ í›„ì† ì²˜ë¦¬ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆë‹¤.

ë§Œì¼ ì²˜ë¦¬ê°€ ì„±ê³µí•´ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ ë‚´ë¶€ì—ì„œ `resolve(data)`ë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ë©´, ë°”ë¡œ `.then()`ìœ¼ë¡œ ì´ëŸ¬ì ¸ `then()`ë©”ì„œë“œì˜ ì½œë°± í•¨ìˆ˜ì—ì„œ ì„±ê³µì— ëŒ€í•œ ì¶”ê°€ ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤. ì´ë•Œ í˜¸ì¶œí•œ `resolve()` í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ì˜ ê°’ì´ `then()`ë©”ì„œë“œì˜ ì½œë°± í•¨ìˆ˜ ì¸ìë¡œ ë“¤ì–´ê°€ `then` ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ ë‚´ë¶€ì—ì„œ ë‹¤ë£¬ ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

ë°˜ëŒ€ë¡œ ì²˜ë¦¬ê°€ ì‹¤íŒ¨í•´ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ ë‚´ë¶€ì—ì„œ reject`("Error")`ë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ë©´, ë°”ë¡œ `.catch()`ë¡œ ì´ì–´ì ¸ `catch` ë©”ì„œë“œì˜ ì½œë°± í•¨ìˆ˜ì—ì„œ ì„±ê³µì— ëŒ€í•œ ì¶”ê°€ ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤.

```js
var willGetNewPhone = new Promise((resolve, reject) => {...});

// Promise í˜¸ì¶œ
var askMom = function () {
    willGetNewPhone
    	.then((fulrilled) => {
        // ì™€! ìƒˆ í°ì„ ì–»ì—ˆë‹¤!
        console.log(fulrilled);
        // output: { brand: 'Apple', color: 'silver' }
    })
    .catch((error) => {
        // ì´ëŸ°,, ì—„ë§ˆê°€ í°ì„ ì•ˆì‚¬ì£¼ë„¤,,
        console.log(error.message);
    });
}
```

```js
myPromise
    .then((value) => { // ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰í–ˆì„ ë•Œ ì‹¤í–‰ë  ì½”ë“œ
    	console.log("Data: ", value); // ìœ„ì—ì„œ return resolve(data)ì˜ dataê°’ì´ ì¶œë ¥ëœë‹¤
    })
    .catch((error) => { // ì‹¤íŒ¨í–ˆì„ ë•Œ ì‹¤í–‰ë  ì½”ë“œ
     	console.error(error); // ìœ„ì—ì„œ return reject("Error")ì˜ "Error"ê°€ ì¶œë ¥ëœë‹¤
    })
    .finally(() => { // ì„±ê³µí•˜ë“  ì‹¤íŒ¨í•˜ë“  ë¬´ì¡°ê±´ ì‹¤í–‰ë  ì½”ë“œ
    	
    })
```



### í”„ë¡œë¯¸ìŠ¤ í•¨ìˆ˜ ë“±ë¡

í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ ë³€ìˆ˜ì— ë°”ë¡œ í• ë‹¹í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆì§€ë§Œ, ë³´í†µì€ ë³„ë„ë¡œ í•¨ìˆ˜ë¡œ ê°ì‹¸ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.

```js
// í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ ìƒì„±
function myPromise() {
  return new Promise((resolve, reject) => {
    if (/* ì„±ê³µ ì¡°ê±´ */) {
      resolve(/* ê²°ê³¼ ê°’ */);
    } else {
      reject(/* ì—ëŸ¬ ê°’ */);
    }
  });
}

// í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ ì‚¬ìš©
myPromise()
    .then((result) => {
      // ì„±ê³µ ì‹œ ì‹¤í–‰í•  ì½œë°± í•¨ìˆ˜
    })
    .catch((error) => {
      // ì‹¤íŒ¨ ì‹œ ì‹¤í–‰í•  ì½œë°± í•¨ìˆ˜
    });
```

í•¨ìˆ˜ë¥¼ ë§Œë“¤ê³  ê·¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ í”„ë¡œë¯¸ìŠ¤ ìƒì„±ìë¥¼ return í•¨ìœ¼ë¡œì„œ, ê³§ë°”ë¡œ ìƒì„±ëœ **í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ í•¨ìˆ˜ ë°˜í™˜ê°’**ìœ¼ë¡œ ì–»ì–´ ì‚¬ìš©í•˜ëŠ” ê¸°ë²•ì´ë‹¤. ì´ë ‡ê²Œ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ í•¨ìˆ˜ë¡œ ë§Œë“œëŠ” ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

â° ì¬ì‚¬ìš©ì„± : í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ í•¨ìˆ˜ë¡œ ë§Œë“¤ë©´ í•„ìš”í•  ë•Œë§ˆë‹¤ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©í•¨ìœ¼ë¡œì¨, ë°˜ë³µë˜ëŠ” ë¹„ë™ê¸° ì‘ì—…ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

â° ê°€ë…ì„± :  í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ í•¨ìˆ˜ë¡œ ë§Œë“¤ë©´ ì½”ë“œì˜ êµ¬ì¡°ê°€ ëª…í™•í•´ì ¸, ë¹„ë™ê¸° ì‘ì—…ì˜ ì •ì˜ì™€ ì‚¬ìš©ì„ ë¶„ë¦¬í•´ ì½”ë“œì˜ ê°€ë…ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.

â° í™•ì¥ì„± :  í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ í•¨ìˆ˜ë¡œ ë§Œë“¤ë©´ ì¸ìë¥¼ ì „ë‹¬í•˜ì—¬ ë™ì ìœ¼ë¡œ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. ë˜í•œ ì—¬ëŸ¬ ê°œì˜ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë“¤ì„ ì—°ê²°í•´ ë³µì¡í•œ ë¹„ë™ê¸° ë¡œì§ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

> â— í”„ë¡œë¯¸ìŠ¤ë¥¼ ìƒì„±í•´ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ 'í”„ë¡œë¯¸ìŠ¤ íŒ©í† ë¦¬ í•¨ìˆ˜'ë¼ê³  ë¶€ë¥´ê¸°ë„ í•œë‹¤.

ìœ„ì™€ ê°™ì€ ì´ìœ ë¡œ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ ì‚¬ìš©í•  ì¼ì´ ìˆë‹¤ë©´ í•¨ìˆ˜ë¡œ ê°ì‹¸ ì‚¬ìš©í•œë‹¤. ê·¸ë˜ì„œ ëŒ€ë¶€ë¶„ì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¹„ë™ê¸° ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ í•¨ìˆ˜ í˜•íƒœë¡œ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ ì œê³µí•œë‹¤. ëŒ€í‘œì ìœ¼ë¡œ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ `fetch()`ë©”ì„œë“œê°€ ìˆë‹¤. ì´ `fetch()` ë©”ì„œë“œ ë‚´ì—ì„œ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ ìƒì„±í•´ ì„œë²„ë¡œë¶€í„° ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë©´ `resolve()`í•´ `.then()`ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤.

```js
// GET ìš”ì²­ ì˜ˆì‹œ
fetch('https://jsonplaceholder.typicode.com/posts/1')
  .then((response) => response.json()) // ì‘ë‹µ ê°ì²´ì—ì„œ JSON ë°ì´í„°ë¥¼ ì¶”ì¶œí•œë‹¤.
  .then((data) => console.log(data)); // JSON ë°ì´í„°ë¥¼ ì½˜ì†”ì— ì¶œë ¥í•œë‹¤.
```



### í”„ë¡œë¯¸ìŠ¤ ì²´ì´ë‹

í”„ë¡œë¯¸ìŠ¤ ì²´ì´ë‹ì´ë€, **í”„ë¡œë¯¸ìŠ¤ í•¸ë“¤ëŸ¬ë¥¼ ì—°ë‹¬ì•„ ì—°ê²°**í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤. ì´ë ‡ê²Œ í•˜ë©´ **ì—¬ëŸ¬ ê°œì˜ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆœì°¨ì ìœ¼ë¡œ ìˆ˜í–‰**í•  ìˆ˜ ìˆë‹¤.

```js
// ìœ„ ì˜ˆì‹œì— ì´ì–´ ìƒˆë¡œìš´ ìŠ¤ë§ˆíŠ¸í°ì„ ì‚¬ë©´ ì¹œêµ¬ë“¤ì—ê²Œ ë³´ì—¬ì£¼ê¸°ë¡œ ì•½ì†(Promise)í–ˆë‹¤ê³  ìƒê°í•´ë³´ì.

...
// 2nd promise
var showOff = (phone) => {
    var message = 'Hey friend, i have a new' + phone.color + ' ' + 'phone.brand' + 'phone';
    return Promise.resolve(message);
};
```

ìœ„ ì˜ˆì‹œì˜ `willGetNewPhone` Promiseë¥¼ ìˆ˜í–‰í•œ ì´í›„ì—ë§Œ, `showOff` Promiseë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.

```js
...
// call our promise
var askMom = () => {
    willGetNewPhone
    .then(showOff) // ì—¬ê¸°ì„œ ì²´ì´ë‹
    .then((fulfilled) => {
        console.log(fulfilleded);
        // output: 'Hey friend, i have a new silver Apple phone.'
    })
    .catch((error) => {
        console.log(erroe.message);
        
    })
}
```



ì•„ë˜ëŠ” `doSomething` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ í”„ë¡œë¯¸ìŠ¤ë¥¼ ìƒì„±í•˜ê³ , then ë©”ì„œë“œë¥¼ í†µí•´ ì´í–‰ í•¸ë“¤ëŸ¬ë¥¼ ì—°ê²°í•˜ëŠ” ê³¼ì •ì„ ë³´ì—¬ì¤€ë‹¤. ê° ì´í–‰ í•¸ë“¤ëŸ¬ëŠ” ì´ì „ í”„ë¡œë¯¸ìŠ¤ì˜ ê°’ì— 50ì„ ë”í•œ ê°’ì„ ë°˜í™˜í•˜ê³ , ë§ˆì§€ë§‰ ì´í–‰ í•¸ë“¤ëŸ¬ëŠ” ìµœì¢… ê°’ì„ ì½˜ì†”ì— ì¶œë ¥í•œë‹¤.

```js
function doSomething() {
  return new Promise((resolve, reject) => {
      resolve(100) // chaining
  });
}

doSomething()
    .then((value1) => {
        const data1 = value1 + 50;
        return data1
    })
    .then((value2) => {
        const data2 = value2 + 50;
        return data2
    })
    .then((value3) => {
        const data3 = value3 + 50;
        return data3
    })
    .then((value4) => {
        console.log(value4); // 250 ì¶œë ¥
    })
```

âœ” ì´ëŸ°ì‹ìœ¼ë¡œ ì²´ì´ë‹ì´ ê°€ëŠ¥í•œ ì´ìœ ëŠ” then í•¸ë“¤ëŸ¬ì—ì„œ ê°’ì„ ë¦¬í„´í•˜ë©´, ê·¸ **ë°˜í™˜ê°’ì€ ìë™ìœ¼ë¡œ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¡œ ê°ì‹¸ì ¸ ë°˜í™˜**ë˜ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë¦¬ê³  ë‹¤ìŒ **then í•¸ë“¤ëŸ¬ì—ì„œ ë°˜í™˜ëœ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ ë°›ì•„ ì²˜ë¦¬**í•˜ëŠ” ê²ƒì´ë‹¤. ê·¸ë˜ì„œ í”„ë¡œë¯¸ìŠ¤ ìƒíƒœì˜ íë¦„ë„ë¥¼ í‘œí˜„í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

![promise status flow](https://blog.kakaocdn.net/dn/btbl7U/btq98vwJvki/ZwOhWDQTkcH7g1n82atKkk/img.png)

âœ” ë§Œì¼ ì—°ê²°ëœ ì´í–‰ í•¸ë“¤ëŸ¬ì—ì„œ ì¤‘ê°„ì— ì˜¤ë¥˜ê°€ ìˆëŠ” ì²˜ë¦¬ë¥¼ í–‰í•˜ë©´, ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•¨ìœ¼ë¡œì¨ catch í•¸ë“¤ëŸ¬ì— ì í”„í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. `try`-`catch`ì™€ ë¹„ìŠ·í•œ ê°œë….

```js
function doSomething(arg) {
  return new Promise((resolve, reject) => {
      resolve(arg) // 2. resolve ë˜ê³ 
  });
}

doSomething('100A')  // 1. ì—¬ê¸°ì„œ doSomething 100A argë¡œ í˜¸ì¶œ 
    .then((value1) => {
        const data1 = value1 + 50; // ìˆ«ìì— ë¬¸ìë¥¼ ì—°ì‚°

        if (isNaN(data1)) // 3. ì—¬ê¸°ì„œ ì—ëŸ¬ íŒë‹¨.
            throw new Error('ê°’ì´ ë„˜ë²„ê°€ ì•„ë‹™ë‹ˆë‹¤') 
        
        return data1
    })
    .then((value2) => {
        const data2 = value2 + 50;
        return data2
    })
    .catch((err) => { // 4. ì—ëŸ¬ ë°˜í™˜
        console.error(err);
    })
```

ë§Œì¼ catch í•¸ë“¤ëŸ¬ ë‹¤ìŒìœ¼ë¡œ then í•¸ë“¤ëŸ¬ê°€ ì´ì–´ì„œ ì²´ì´ë‹ ë˜ì–´ ìˆë‹¤ë©´, ì—ëŸ¬ê°€ ì²˜ë¦¬ë˜ê³  ê°€ê¹Œìš´ then í•¸ë“¤ëŸ¬ë¡œ ì œì–´ íë¦„ì´ ë„˜ì–´ê°€ ì‹¤í–‰ì´ ì´ì–´ì§€ê²Œ ëœë‹¤.

```js
new Promise((resolve, reject) => {
  throw new Error("ì—ëŸ¬ ë°œìƒ!"); // 1. ì—ëŸ¬ë°œìƒ
})
    .catch(function(error) { // 2. catch ì—ì„œ ì—ëŸ¬ ì¡ê³ ,
      console.log("ì—ëŸ¬ê°€ ì˜ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ì´ ì´ì–´ì§‘ë‹ˆë‹¤.");
    })
    .then(() => { // 3. ì—ëŸ¬ ì²˜ë¦¬ ì •ìƒì •ìœ¼ë¡œ ë˜ë©´ ì²´ì´ë‹ ëœ thenìœ¼ë¡œ ë„˜ì–´ê°
        console.log("ë‹¤ìŒ í•¸ë“¤ëŸ¬ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.")
    })
    .then(() => {
        console.log("ë‹¤ìŒ í•¸ë“¤ëŸ¬ê°€ ë˜ ì‹¤í–‰ë©ë‹ˆë‹¤.")
    });

// ì—ëŸ¬ê°€ ì˜ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ì´ ì´ì–´ì§‘ë‹ˆë‹¤.
// ë‹¤ìŒ í•¸ë“¤ëŸ¬ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.
// ë‹¤ìŒ í•¸ë“¤ëŸ¬ê°€ ë˜ ì‹¤í–‰ë©ë‹ˆë‹¤.
```



### í”„ë¡œë¯¸ìŠ¤ ì •ì  ë©”ì„œë“œ

í”„ë¡œë¯¸ìŠ¤ ê°ì²´ëŠ” ìƒì„±ì í•¨ìˆ˜ ì™¸ì—ë„ ì—¬ëŸ¬ê°€ì§€ ì •ì  ë©”ì„œë“œ(static method)ë¥¼ ì œê³µí•œë‹¤. ì •ì  ë©”ì„œë“œëŠ” ê°ì²´ë¥¼ ì´ˆê¸°í™” & ìƒì„±í•˜ì§€ ì•Šê³ ë„ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ë³´ë‹¤ íš¨ìœ¨ì ì´ê³  ê°„í¸í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.

**âœ… Promise.resolve()**

ë³´í†µ í”„ë¡œë¯¸ìŠ¤ì˜ `resolve()`ë©”ì„œë“œëŠ” í”„ë¡œë¯¸ìŠ¤ë¥¼ ìƒì„±ìë¡œ ë§Œë“¤ê³  ê·¸ ì•ˆì˜ ì½œë°± í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ í†µí•´ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©í•´ì™”ë‹¤.

```js
// í”„ë¡œë¯¸ìŠ¤ ìƒì„±ìë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
function getPromiseNumber() {
  return new Promise((resolve, reject) => {
      const num = Math.floor(Math.random() * 10); // 0 ~ 9 ì‚¬ì´ì˜ ì •ìˆ˜
      resolve(num); // í”„ë¡œë¯¸ìŠ¤ ì´í–‰
  });
}
```

ì´ëŸ¬í•œ ê³¼ì •ì„ `Promise.resolve()` ì •ì  ë©”ì„œë“œë¡œ í•œ ë²ˆì— í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ í¸ì˜ ê¸°ëŠ¥ì„ ì œê³µí•´ ì£¼ëŠ” ê²ƒìœ¼ë¡œ ë³´ë©´ ëœë‹¤. ê·¸ë˜ì„œ í”„ë¡œë¯¸ìŠ¤ ì •ì  ë©”ì„œë“œë¥¼ ì´ìš©í•˜ë©´ **í”„ë¡œë¯¸ìŠ¤ ê°ì²´ì™€ëŠ” ì „í˜€ ì—°ê´€ì—†ëŠ” í•¨ìˆ˜ ë‚´ì—ì„œ í•„ìš”ì— ë”°ë¼ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ ë°˜í™˜í•´ í•¸ë“¤ëŸ¬ë¥¼ ì´ìš©**í•  ìˆ˜ ìˆë„ë¡ ì‘ìš©ì´ ê°€ëŠ¥í•˜ë‹¤. ì´ ë°©ë²•ì€ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ì—ì„œë„ í”„ë¡œë¯¸ìŠ¤ì˜ ì¥ì ì„ í™œìš©í•˜ê³  ì‹¶ì€ ê²½ìš°ì— ìœ ìš©í•˜ë‹¤.

```js
// í”„ë¡œë¯¸ìŠ¤ ê°ì²´ì™€ ì „í˜€ ì—°ê´€ì—†ëŠ” í•¨ìˆ˜
function getRandomNumber() {
  const num = Math.floor(Math.random() * 10); // 0 ~ 9 ì‚¬ì´ì˜ ì •ìˆ˜
  return num;
}

// Promise.resolve() ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
function getPromiseNumber() {
  const num = getRandomNumber(); // ì¼ë°˜ ê°’
  return Promise.resolve(num); // í”„ë¡œë¯¸ìŠ¤ ê°ì²´
}

// í•¸ë“¤ëŸ¬ë¥¼ ì´ìš©í•˜ì—¬ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ì˜ ê°’ì„ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜
getPromiseNumber()
    .then((value) => {
      console.log(`ëœë¤ ìˆ«ì: ${value}`);
    })
    .catch((error) => {
      console.error(error);
    });
```



**âœ… Promise.reject()**

ë§ˆì°¬ê°€ì§€ë¡œ ì£¼ì–´ì§„ ì‚¬ìœ ë¡œ ê±°ë¶€í•˜ëŠ” Promise ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.

```js
// ì£¼ì–´ì§„ ì‚¬ìœ ë¡œ ê±°ë¶€ë˜ëŠ” í”„ë¡œë¯¸ìŠ¤ ìƒì„±
const p = Promise.reject(new Error('error'));

// ê±°ë¶€ ì‚¬ìœ ë¥¼ ì¶œë ¥
p.catch(error => console.error(error)); // Error: error
```



**âœ… Promise.all()**

ë°°ì—´, Map, Set ì— í¬í•¨ëœ ì—¬ëŸ¬ê°œì˜ í”„ë¡œë¯¸ìŠ¤ ìš”ì†Œë“¤ì„ í•œêº¼ë²ˆì— ë¹„ë™ê¸° ì‘ì—…ì„ ì²˜ë¦¬í•´ì•¼ í•  ë•Œ êµ‰ì¥íˆ ìœ ìš©í•œ í”„ë¡œë¯¸ìŠ¤ ì •ì ë©”ì†Œë“œì´ë‹¤**. ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì´í–‰(fulfilled) ë  ë•Œ ê¹Œì§€ ê¸°ë‹¤ë ¤ì„œ, ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ê°€ ì™„ë£Œë˜ë©´ ê·¸ë•Œ then í•¸ë“¤ëŸ¬ê°€ ì‹¤í–‰í•˜ëŠ” í˜•íƒœ**ë¡œ ë³´ë©´ ëœë‹¤. ê°€ì¥ ëŒ€í‘œì ì¸ ì‚¬ìš© ì˜ˆì‹œë¡œ ì—¬ëŸ¬ ê°œì˜ API ìš”ì²­ì„ ë³´ë‚´ê³  ëª¨ë“  ì‘ë‹µì„ ë°›ì•„ì•¼ í•˜ëŠ” ê²½ìš°ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```js
// 1. ì„œë²„ ìš”ì²­ API í”„ë¡œë¯¸ìŠ¤ ê°ì²´ ìƒì„± (fetch)
const api_1 = fetch("https://jsonplaceholder.typicode.com/users");
const api_2 = fetch("https://jsonplaceholder.typicode.com/users");
const api_3 = fetch("https://jsonplaceholder.typicode.com/users");

// 2. í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë“¤ì„ ë¬¶ì–´ ë°°ì—´ë¡œ êµ¬ì„±
const promises = [api_1, api_2, api_3];

// 3. Promise.all() ë©”ì„œë“œ ì¸ìë¡œ í”„ë¡œë¯¸ìŠ¤ ë°°ì—´ì„ ë„£ì–´, ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ê°€ ì´í–‰ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê³ , ê²°ê³¼ê°’ì„ ì¶œë ¥
Promise.all(promises)
    .then((results) => {
      // resultsëŠ” ì´í–‰ëœ í”„ë¡œë¯¸ìŠ¤ë“¤ì˜ ê°’ë“¤ì„ ë‹´ì€ ë°°ì—´.
      // resultsì˜ ìˆœì„œëŠ” promisesì˜ ìˆœì„œì™€ ì¼ì¹˜.
      console.log(results); // [users1, users2, users3]
    })
    .catch((error) => {
      // ì–´ëŠ í•˜ë‚˜ë¼ë„ í”„ë¡œë¯¸ìŠ¤ê°€ ê±°ë¶€ë˜ë©´ ì˜¤ë¥˜ë¥¼ ì¶œë ¥
      console.error(error);
    });
```



**âœ… Promise.allSettled()**

`Promise.all()` ë©”ì„œë“œì˜ ì—…ê·¸ë ˆì´ë“œ ë²„ì „ìœ¼ë¡œ, ì£¼ì–´ì§„ ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ê°€ ì²˜ë¦¬ë˜ë©´ ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ ê°ê°ì˜ ìƒíƒœì™€ ê°’(ë˜ëŠ” ê±°ë¶€ ì‚¬ìœ )ì„ ëª¨ì•„ë†“ì€ ë°°ì—´ì„ ë°˜í™˜í•œë‹¤.

```js
// 1ì´ˆ í›„ì— 1ì„ ë°˜í™˜í•˜ëŠ” í”„ë¡œë¯¸ìŠ¤
const p1 = new Promise(resolve => setTimeout(() => resolve(1), 1000));

// 2ì´ˆ í›„ì— ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¤ëŠ” í”„ë¡œë¯¸ìŠ¤
const p2 = new Promise((resolve, reject) => setTimeout(() => reject(new Error('error')), 2000));

// 3ì´ˆ í›„ì— 3ì„ ë°˜í™˜í•˜ëŠ” í”„ë¡œë¯¸ìŠ¤
const p3 = new Promise(resolve => setTimeout(() => resolve(3), 3000));

// ì„¸ ê°œì˜ í”„ë¡œë¯¸ìŠ¤ì˜ ìƒíƒœì™€ ê°’ ë˜ëŠ” ì‚¬ìœ ë¥¼ ì¶œë ¥ (ë°°ì—´ ë°˜í™˜)
Promise.allSettled([p1, p2, p3])
	.then(result => console.log(result));
```



**âœ… Promise.any()**

`Promise.all()` ë©”ì„œë“œì˜ ë°˜ëŒ€ ë²„ì „ìœ¼ë¡œ, `Promise.all()` ì´ ì£¼ì–´ì§„ ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ê°€ **ëª¨ë‘ ì™„ë£Œ** í•´ì•¼ë§Œ ê²°ê³¼ë¥¼ ë„ì¶œí•œë‹¤ë©´, `Promise.any()`ëŠ” ì£¼ì–´ì§„ ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ ì¤‘ **í•˜ë‚˜ë¼ë„ ì™„ë£Œ**ë˜ë©´ ë°”ë¡œ ë°˜í™˜í•˜ëŠ” ì •ì  ë©”ì„œë“œì´ë‹¤.

```js
const promise1 = new Promise((resolve, reject) => {
  setTimeout(() => {
    reject("promise1 failed");
  }, 3000);
});

const promise2 = new Promise((resolve, reject) => {
  setTimeout(() => {
    resolve("promise2 succeeded");
  }, 2000);
});

const promise3 = new Promise((resolve, reject) => {
  setTimeout(() => {
    reject("promise3 failed");
  }, 1000);
});

// promise1, promise2, promise3ì€ ê°ê° 3ì´ˆ, 2ì´ˆ, 1ì´ˆ í›„ì— ê±°ë¶€ë˜ê±°ë‚˜ ì´í–‰
Promise.any([promise1, promise2, promise3])
  .then((value) => {
    console.log(value); // "promise2 succeeded" 
  })
  .catch((error) => {
    console.error(error);
  });
```

ìœ„ ì½”ë“œë¥¼ ë³´ë©´ `Promise.any()` ë©”ì„œë“œì˜ ê²°ê³¼ë¡œ promise2ì˜ ì²˜ë¦¬ê°€ ê°€ì¥ ë¨¼ì € ë„ì¶œë¨ì„ ë³¼ ìˆ˜ ìˆë‹¤. ì˜¤ë¡œì§€ ì²«ë²ˆì§¸ë¡œ ì´í–‰(fulfilled) ëœ í”„ë¡œë¯¸ìŠ¤ë§Œì„ ì·¨ê¸‰í•˜ê¸° ë•Œë¬¸ì— ë‚˜ë¨¸ì§€ promise1ê³¼ promise3ì˜ ê±°ë¶€(rejected)ëŠ” ë¬´ì‹œë˜ê²Œ ëœë‹¤.
ë§Œì¼ ìš”ì²­ëœ ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ê°€ ê±°ë¶€(rejected)ë˜ë©´, AggregateError ê°ì²´ë¥¼ ì‚¬ìœ ë¡œ í•˜ëŠ” ê±°ë¶€ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤. (ì•„ë˜ ì˜ˆì‹œ)

```js
const promise1 = new Promise((resolve, reject) => {
  setTimeout(() => {
    reject("promise1 failed");
  }, 3000);
});

const promise2 = new Promise((resolve, reject) => {
  setTimeout(() => {
    resolve("promise2 succeeded");
  }, 2000);
});

const promise4 = new Promise((resolve, reject) => {
  setTimeout(() => {
    reject("promise4 failed");
  }, 4000);
});

Promise.any([promise1, promise3, promise4])
  .then((value) => {
    console.log(value);
  })
  .catch((error) => {
    console.error(error); // AggregateError: All promises were rejected
    console.error(error.errors); // ["promise3 failed", "promise1 failed", "promise4 failed"]
  });
```



**âœ… Promise.race()**

`Promise.race()`ëŠ” `Promise.any()`ì™€ ê°™ì´ ì—¬ëŸ¬ ê°œì˜ í”„ë¡œë¯¸ìŠ¤ ì¤‘ ê°€ì¥ ë¨¼ì € ì²˜ë¦¬ëœ í”„ë¡œë¯¸ìŠ¤ì˜ ê²°ê³¼ê°’ì„ ë°˜í™˜í•˜ì§€ë§Œ, ì°¨ì´ì ì´ ì¡´ì¬í•œë‹¤.

`Promise.any()`ëŠ” ê°€ì¥ ë¨¼ì € fulfilled(ì´í–‰) ìƒíƒœê°€ ëœ í”„ë¡œë¯¸ìŠ¤ë§Œì„ ë°˜í™˜í•˜ê±°ë‚˜, í˜¹ì€ ì „ë¶€ rejected(ì‹¤íŒ¨) ìƒíƒœê°€ ëœ í”„ë¡œë¯¸ìŠ¤(AggregateError)ë¥¼ ë°˜í™˜í•œë‹¤. ë°˜ë©´ `Promise.race()`ëŠ” fulcilled(ì´í–‰), rejected(ì‹¤íŒ¨) **ì—¬ë¶€ ìƒê´€ì—†ì´ ë¬´ì¡°ê±´ ì²˜ë¦¬ê°€ ëë‚œ í”„ë¡œë¯¸ìŠ¤ ê²°ê³¼ê°’ì„ ë°˜í™˜**í•œë‹¤.

```js
const promise1 = new Promise((resolve, reject) => {
  setTimeout(() => {
    reject("promise1 failed");
  }, 3000);
});

const promise2 = new Promise((resolve, reject) => {
  setTimeout(() => {
    resolve("promise2 succeeded");
  }, 2000);
});

const promise3 = new Promise((resolve, reject) => {
  setTimeout(() => {
    reject("promise3 failed"); // 1. ì—¬ê¸°ì„œ ë¨¼ì € ê±¸ë¦°ë‹¤ anyì™€ ë‹¤ë¥´ê²Œ ì‹¤íŒ¨ì—¬ë„ ê±¸ë¦¼
  }, 1000);
});

Promise.race([promise1, promise2, promise3])
  .then((result) => console.log(result))
  .catch((error) => console.error(error)); // 2. rejectë‹ˆê¹Œ ì—ëŸ¬ì— ê±¸ë ¤ì„œ promise3 failed ì¶œë ¥
```







## Reference

[MWD Promise](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise)

[ğŸ“š ìë°”ìŠ¤í¬ë¦½íŠ¸ Promise ê°œë… & ë¬¸ë²• ì •ë³µí•˜ê¸°](https://inpa.tistory.com/entry/JS-%F0%9F%93%9A-%EB%B9%84%EB%8F%99%EA%B8%B0%EC%B2%98%EB%A6%AC-Promise)

[ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°œë°œìë¼ë©´ ì•Œì•„ì•¼ í•  33ê°€ì§€ ê°œë… #25 ìë°”ìŠ¤í¬ë¦½íŠ¸ : ë°”ë³´ë¥¼ ìœ„í•œ Promise](https://velog.io/@jakeseo_me/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%9D%BC%EB%A9%B4-%EC%95%8C%EC%95%84%EC%95%BC-%ED%95%A0-33%EA%B0%80%EC%A7%80-%EA%B0%9C%EB%85%90-25-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EB%B0%94%EB%B3%B4%EB%A5%BC-%EC%9C%84%ED%95%9C-Promise)

[Understanding JavaScript Promises](https://www.digitalocean.com/community/tutorials/understanding-javascript-promises#toc-new-kid-on-the-block-observables)

[ğŸ“š Promise.allSettledì™€ Promise.all ë¹„êµ ì •ë¦¬](https://inpa.tistory.com/entry/JS-%F0%9F%93%9A-%EB%8D%94%EC%9D%B4%EC%83%81-Promiseall-%EC%93%B0%EC%A7%80%EB%A7%90%EA%B3%A0-PromiseallSettled-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90)