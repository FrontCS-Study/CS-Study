# ì œë„ˆë ˆì´í„°ì™€ async await



## ì œë„ˆë ˆì´í„°(Generator)

> ES6ëŠ” **ì œë„ˆë ˆì´í„° ë˜ëŠ” Generator í•¨ìˆ˜** í˜•íƒœì—ì„œ í•¨ìˆ˜ì™€ Iteratorë¥¼ ë‹¤ë£¨ëŠ” ë°©ë²•ì„ ìƒˆë¡­ê²Œ ì†Œê°œí–ˆë‹¤. ì œë„ˆë ˆì´í„°ëŠ” í•¨ìˆ˜ë¥¼ **ì¤‘ê°„ì—ì„œ** ë©ˆì¶”ê³ , ë‹¤ì‹œ ë©ˆì·„ë˜ ë¶€ë¶„ë¶€í„° ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•œë‹¤. ìš”ì•½í•˜ë©´, **GeneratorëŠ” í•¨ìˆ˜ì˜ í˜•íƒœë¥¼ ë„ì§€ë§Œ, Iterator ì²˜ëŸ¼ ë™ì‘í•œë‹¤.**
>
> `async/await`ì´ Generatorë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ê²ƒì´ë‹¤.



### â“ ì œë„ˆë ˆì´í„°ë€?

ì¼ë°˜ì ì¸ í•¨ìˆ˜ë“¤ì€ ì‘ì—…ì´ ëë‚˜ê¸° ì „ì—” ëë‚¼ ìˆ˜ ì—†ë‹¤. í•¨ìˆ˜ë¥¼ ë‹¤ì‹œ í•œ ë²ˆ í˜¸ì¶œí•˜ë©´, í•¨ìˆ˜ëŠ” ë§¨ ìœ„ì—ì„œë¶€í„° ë‹¤ì‹œ ì‹¤í–‰ì„ ì‹œì‘í•  ê²ƒì´ë‹¤.
ë°˜ëŒ€ë¡œ, ì œë„ˆë ˆì´í„°ëŠ” **ì¤‘ê°„ì— ë©ˆì¶œ ìˆ˜ ìˆëŠ”** í•¨ìˆ˜ì´ë‹¤. ê·¸ë¦¬ê³  **ë©ˆì¶˜ ë¶€ë¶„ë¶€í„° ë‹¤ì‹œ ì‹¤í–‰**ì„ ì‹œì‘í•  ìˆ˜ ìˆë‹¤.

âœ” ì œë„ˆë ˆì´í„°ëŠ” Iterator ì‘ì„± ì‘ì—…ì„ ê°„ë‹¨í•˜ê²Œ í•´ì¤„ ìˆ˜ ìˆëŠ” í•¨ìˆ˜ë“¤ì˜ íŠ¹ë³„í•œ í´ë˜ìŠ¤ì´ë‹¤.

âœ” ì œë„ˆë ˆì´í„°ëŠ” í•˜ë‚˜ì˜ ê°’ ëŒ€ì‹ ì— ê²°ê³¼ì˜ ìˆœì„œë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤. ì´ë¥¼í…Œë©´, ì œë„ˆë ˆì´í„°ëŠ” ê°’ì˜ ì‹œë¦¬ì¦ˆë¥¼ ë§Œë“¤ì–´(generate) ë‚¸ë‹¤.

JSì—ì„œ ì œë„ˆë ˆì´í„°ëŠ” `next()`ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ì˜¤ë¸Œì íŠ¸ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤. `next()`í˜¸ì¶œì„ í•  ë•Œë§ˆë‹¤, ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœì˜ ì˜¤ë¸Œì íŠ¸ë¥¼ ë°˜í™˜í•œë‹¤.

```js
{
    value: Any,
    done: true|false
}
```

`value` í”„ë¡œí¼í‹°ëŠ” ê°’ì„ ê°€ì§„ë‹¤. `done` í”„ë¡œí¼í‹°ëŠ” `true`í˜¹ì€ `false`ë¥¼ ê°–ëŠ”ë‹¤. `done`ì´ `true`ê°€ ë  ë•Œ ì œë„ˆë ˆì´í„°ëŠ” ë©ˆì¶”ê³  ë”ì´ìƒ ê°’ì„ ë§Œë“¤ì–´ë‚´ì§€ ì•ŠëŠ”ë‹¤.

![normal func vs generator](https://velog.velcdn.com/post-images%2Fjakeseo_me%2F6bc9dbc0-aae3-11e9-8649-35506338cef4%2FGeneratorArchitecture.png)

ìœ„ ê·¸ë¦¼ì€ ì¼ë°˜ í•¨ìˆ˜ì™€ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ ë¹„êµí•œ ê²ƒì´ë‹¤.

ì œë„ˆë ˆì´í„°ê°€ ì‹¤í–‰ë˜ë‹¤ê°€ `yield`ë¥¼ ë§Œë‚˜ë©´ ë©ˆì¶”ê³  ê·¸ êµ¬ê°„ì„ ë¹ ì ¸ë‚˜ì˜¤ë©´ ë‹¤ì‹œ ì‹œì‘ë˜ê³  ë‹¤ì‹œ `yield`ë¥¼ ë§Œë‚˜ë©´ ë©ˆì¶˜ë‹¤ëŠ” ì´ì•¼ê¸°ì´ë‹¤.



### ì œë„ˆë ˆì´í„° í•¨ìˆ˜ ì‚¬ìš©

ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” `function*` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©°, ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•˜ë©´ ëœë‹¤.

```js
// ì œë„ˆë ˆì´í„°

function* generatorFunc1() {...}
const generatorFunc2  functoin* () {...}
```

 â— ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” í™”ì‚´í‘œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

- `*`(asterisk) ì˜ ìœ„ì¹˜ëŠ” `function` í‚¤ì›Œë“œì™€ í•¨ìˆ˜ ì´ë¦„ ì‚¬ì´ë©´ ì•„ë¬´ë°ë‚˜ ë¶™ì—¬ë„ ë˜ì§€ë§Œ, ì¼ê´€ì„± ìœ ì§€ ëª©ì ìœ¼ë¡œ `function` í‚¤ì›Œë“œ ë°”ë¡œ ë’¤ì— ë¶™ì´ëŠ” ê²ƒì´ ê¶Œì¥ëœë‹¤ê³  í•œë‹¤.



###  ì œë„ˆë ˆì´í„° í•¨ìˆ˜ vs ì¼ë°˜ í•¨ìˆ˜

1ï¸âƒ£ **ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œìì—ê²Œ í•¨ìˆ˜ ì‹¤í–‰ì˜ ì œì–´ê¶Œì„ ì–‘ë„(yield)í•  ìˆ˜ ìˆë‹¤.**

- ì¼ë°˜ í•¨ìˆ˜ì˜ ê²½ìš°, í•¨ìˆ˜ê°€ ì–´ë”˜ê°€ì—ì„œ í˜¸ì¶œë˜ë©´ ê·¸ í•¨ìˆ˜ì— ëŒ€í•œ ì œì–´ê¶Œì€ í˜¸ì¶œëœ í•¨ìˆ˜ ë³¸ì¸ì—ê²Œ ë„˜ì–´ê°„ë‹¤. 
- í•˜ì§€ë§Œ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” **í•¨ìˆ˜ ì‹¤í–‰ì˜ ì œì–´ê¶Œì„ í•¨ìˆ˜ í˜¸ì¶œìì—ê²Œ ì–‘ë„**í•  ìˆ˜ ìˆë‹¤. ì¦‰, **í•¨ìˆ˜ í˜¸ì¶œìëŠ” í•¨ìˆ˜ ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ì§€ì‹œí‚¤ê±°ë‚˜ ë‹¤ì‹œ ì‹œì‘í•˜ê²Œ í•˜ë„ë¡ í•  ìˆ˜** ìˆë‹¤.

2ï¸âƒ£ **ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œìì™€ í•¨ìˆ˜ì˜ ìƒíƒœë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆë‹¤.**

- ì¼ë°˜ í•¨ìˆ˜ëŠ” í˜¸ì¶œë˜ëŠ” ìˆœê°€ì— ë§¤ê°œë³€ìˆ˜(parameter)ë¥¼ í†µí•´ í•¨ìˆ˜ ì™¸ë¶€ì—ì„œë¶€í„° ê°’ì„ ì „ë‹¬ ë°›ê³  ì‹¤í–‰ëœë‹¤. ì´ëŠ” ì¦‰, **í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê³  ìˆëŠ” ë™ì•ˆì—ëŠ” í•¨ìˆ˜ ì™¸ë¶€ì—ì„œ í•¨ìˆ˜ ë‚´ë¶€ë¡œ ê°’ì„ ì „ë‹¬í•´ í•¨ìˆ˜ì˜ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤**ëŠ” ê²ƒì„ ëœ»í•œë‹¤.
- ë°˜ë©´ **ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œìì™€ ì–‘ë°©í–¥ìœ¼ë¡œ í•¨ìˆ˜ì˜ ìƒíƒœë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆë‹¤**. ì¦‰, ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œìì—ê²Œ ìì‹ ì˜ ìƒíƒœë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆê³  í•¨ìˆ˜ í˜¸ì¶œìë¡œë¶€í„° ì¶”ê°€ì ìœ¼ë¡œ ìƒíƒœë¥¼ ì „ë‹¬ë°›ì„ ìˆ˜ë„ ìˆë‹¤.

3ï¸âƒ£ **ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” í˜¸ì¶œ ì‹œ ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ìƒì„±í•´ ë°˜í™˜í•œë‹¤.**

- ì¼ë°˜ í•¨ìˆ˜ëŠ” í˜¸ì¶œì´ ë˜ë©´ í•¨ìˆ˜ì˜ ì½”ë“œ ë¸”ë¡ì„ ì‹¤í–‰ì‹œí‚¨ë‹¤. 
- ë°˜ë©´, ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” ì½”ë“œ ë¸”ë¡ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ **ì œë„ˆë ˆì´í„° ê°ì²´**ë¥¼ ìƒì„±í•´ì„œ ë°˜í™˜í•œë‹¤.



### ì œë„ˆë ˆì´í„° ê°ì²´(Generator object)ë€?

ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ ë¦¬í„´ë˜ëŠ” ê°ì²´ì´ë‹¤. ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” ì´í„°ëŸ¬ë¸”(iterable) ì´ë©´ì„œ ë™ì‹œì— ì´í„°ë ˆì´í„°(iterator) ì´ë‹¤.

1. **ì´í„°ëŸ¬ë¸”(iterable)**

   ì´í„°ëŸ¬ë¸”ì€ **ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•œ ê°ì²´**ë¥¼ ëœ»í•œë‹¤. ì—¬ê¸°ì„œ 'ì–´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í–ˆë‹¤' ëŠ” ê²ƒì€ Symbol.iterator ë¥¼ í”„ë¡œí¼í‹°ë¡œ ì‚¬ìš©í•œ ë©”ì†Œë“œë¥¼ ì§ì ‘ êµ¬í˜„í•˜ê±°ë‚˜, í”„ë¡œí† íƒ€ì… ì²´ì¸ì„ í†µí•´ ìƒì†ë°›ì€ ê°ì²´ë¥¼ ë§í•œë‹¤. ë°°ì—´, ë¬¸ìì—´, Map, ê·¸ë¦¬ê³  Set ëª¨ë‘ ì´í„°ëŸ¬ë¸”ì´ë‹¤.

   ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” ì´í„°ëŸ¬ë¸”ì´ê¸° ë•Œë¬¸ì— `for ... of` ë¬¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ìŠ¤í”„ë ˆë“œ ë¬¸ë²•ê³¼ ë°°ì—´ ë””ìŠ¤íŠ¸ëŸ­ì²˜ë§ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

2. **ì´í„°ë ˆì´í„°(iterator)**

   ì´í„°ë ˆì´í„°ëŠ” **ì´í„°ëŸ¬ë¸”ì— Symbol.iterator ë©”ì†Œë“œë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ ë°˜í™˜ë˜ëŠ” ê°’**ì´ë‹¤.

   ```js
   const myArr = [1,2,3]
   const iterator = myArr[Symbol.iterator]()
   ```

   ì´í„°ë ˆì´í„°ëŠ” nextë¼ëŠ” ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ìˆëŠ”ë°, ì´ê±¸ ì´ìš©í•´ì„œ ì´í„°ëŸ¬ë¸” ê° ìš”ì†Œë¥¼ ìˆœíšŒí•  ìˆ˜ ìˆë‹¤. `next` ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë©´, ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´(Iterator result object)ê°€ ë°˜í™˜ëœë‹¤. ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ëŠ” value ì™€ done ì´ë¼ëŠ” í”„ë¡œí¼í‹°ë¥¼ ê°–ëŠ”ë‹¤.

   ```js
   const myArr = [1,2,3]
   const iterator = myArr[Symbol.iterator]()
   const iteratorResultObject = iterator.next()
   console.log(iteratorResultObject) // { value: 1, done: false }
   ```

â€‹		ì œë„ˆë ˆì´í„° ê°ì²´ë„ ì´í„°ë ˆì´í„°ì´ê¸° ë•Œë¬¸ì—, `next` ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.



## async / await

> ES8ì— ë„ì…ëœ ë¬¸ë²•ìœ¼ë¡œì„œ, Promise ë¡œì§ì„ ë” ì‰½ê³  ê°„ê²°í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë¬¸ë²•ì´ë‹¤. ìœ ì˜í•´ì•¼ í•  ì ì´ **`async/await`ê°€ Promiseë¥¼ ëŒ€ì²´í•˜ê¸° ìœ„í•œ ê¸°ëŠ¥ì´ ì•„ë‹ˆë¼ëŠ” ê²ƒ**ì´ë‹¤. ë‚´ë¶€ì ìœ¼ë¡œëŠ” ì—¬ì „íˆ Promiseë¥¼ ì‚¬ìš©í•´ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í•˜ê³ , ë‹¨ì§€ ì½”ë“œ ì‘ì„± ë¶€ë¶„ì„ í”„ë¡œê·¸ë˜ë¨¸ê°€ ìœ ì§€ë³´ìˆ˜í•˜ê²Œ í¸í•˜ê²Œ **ë³´ì´ëŠ” ë¬¸ë²•ë§Œ ë‹¤ë¥´ê²Œ í•´ì¤„ ë¿**ì´ë¼ëŠ” ê²ƒì´ë‹¤.

### async / await ê¸°ë³¸ ì‚¬ìš©ë²•

async ì™€ await ëŠ” ì ˆì°¨ì  ì–¸ì–´ì—ì„œ ì‘ì„±í•˜ëŠ” ì½”ë“œì™€ ê°™ì´ ì‚¬ìš©ë²•ë„ ê°„ë‹¨í•˜ê³  ì´í•´í•˜ê¸°ë„ ì‰½ë‹¤. **function í‚¤ì›Œë“œ ì•ì— `async` ë§Œ ë¶™ì—¬ì£¼ë©´ ë˜ê³ , ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬ë˜ëŠ” ë¶€ë¶„ ì•ì— `await` ë§Œ ë¶™ì—¬ì£¼ë©´ ëœë‹¤.**

```js
// í”„ë¡œë¯¸ìŠ¤ ê°ì²´ ë°˜í™˜ í•¨ìˆ˜
function delay(ms) {
  return new Promise(resolve => {
    setTimeout(() => {
      console.log(`${ms} ë°€ë¦¬ì´ˆê°€ ì§€ë‚¬ìŠµë‹ˆë‹¤.`);
      resolve()
    }, ms);
  });
}
```

```js
// ê¸°ì¡´ Promise.then() í˜•ì‹
function main() {
  delay(1000)
      .then(() => {
        return delay(2000);
      })
      .then(() => {
        return Promise.resolve('ë');
      })
      .then(result => {
        console.log(result);
      });
}

// ë©”ì¸ í•¨ìˆ˜ í˜¸ì¶œ
main();
```

```js
// async/await ë°©ì‹
async function main() {
  await delay(1000);
  await delay(2000);
  const result = await Promise.resolve('ë');
  console.log(result);
}

// ë©”ì¸ í•¨ìˆ˜ í˜¸ì¶œ
main();
```

- promiseëŠ” then ë©”ì„œë“œë¥¼ ì—°ì†ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í•˜ì§€ë§Œ, async/awaitëŠ” await í‚¤ì›Œë“œë¡œ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì§ê´€ì ìœ¼ë¡œ í‘œí˜„í•˜ê³  ìˆìŒì„ ë³¼ ìˆ˜ ìˆë‹¤. 
- async/awaitì˜ ì¥ì ì€ ë¹„ë™ê¸°ì  ì ‘ê·¼ë°©ì‹ì„ ë™ê¸°ì ìœ¼ë¡œ ì‘ì„±í•  ìˆ˜ ìˆê²Œ í•´ì£¼ì–´ ì½”ë“œê°€ ê°„ê²°í•´ì§€ë©° ê°€ë…ì„±ì„ ë†’ì—¬ì ¸ ìœ ì§€ë³´ìˆ˜ë¥¼ ìš©ì´í•˜ê²Œ í•´ì¤€ë‹¤.





## Reference

- [ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°œë°œìë¼ë©´ ì•Œì•„ì•¼ í•  33ê°€ì§€ ê°œë… #24-2 ìë°”ìŠ¤í¬ë¦½íŠ¸ : ì˜ˆì œì™€ í•¨ê»˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ES6 generator](https://velog.io/@jakeseo_me/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%9D%BC%EB%A9%B4-%EC%95%8C%EC%95%84%EC%95%BC-%ED%95%A0-33%EA%B0%80%EC%A7%80-%EA%B0%9C%EB%85%90-24-2-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%98%88%EC%A0%9C%EC%99%80-%ED%95%A8%EA%BB%98-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-ES6-generator)

- [[JS] ì œë„ˆë ˆì´í„°ë€(Genrerator)?!](https://seo-tory.tistory.com/77)
- [ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°œë°œìë¼ë©´ ì•Œì•„ì•¼ í•  33ê°€ì§€ ê°œë… #26 ìë°”ìŠ¤í¬ë¦½íŠ¸ : Async / Await](https://velog.io/@jakeseo_me/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%9D%BC%EB%A9%B4-%EC%95%8C%EC%95%84%EC%95%BC-%ED%95%A0-33%EA%B0%80%EC%A7%80-%EA%B0%9C%EB%85%90-26-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-Async-Await-2bjygyrlgw)

- [ğŸ“š ìë°”ìŠ¤í¬ë¦½íŠ¸ Async/Await ê°œë… & ë¬¸ë²• ì •ë³µ](https://inpa.tistory.com/entry/JS-%F0%9F%93%9A-%EB%B9%84%EB%8F%99%EA%B8%B0%EC%B2%98%EB%A6%AC-async-await)